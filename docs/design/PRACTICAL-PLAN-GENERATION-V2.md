# FLEXR Premium - Practical AI Training Plan System
## The Smart Onboarding That Doesn't Overwhelm

**Philosophy**: Ask the RIGHT questions, not ALL the questions. Be smart about defaults. Let AI handle complexity.

---

## PART 1: REFINED ONBOARDING FLOW

### Total Time: ~15-20 minutes (not 50!)
### Questions: ~25 smart questions (not 40!)

---

## SECTION 1: WHO ARE YOU? (3 min)

### Basic Profile
```
1. Age, Weight, Height, Gender
2. Training Background (select one):
   â—‹ Runner (5K to marathon background)
   â—‹ CrossFit / Functional Fitness
   â—‹ Gym / General Fitness
   â—‹ New to Fitness
   â—‹ HYROX Veteran (2+ races)

3. Fitness Level (we help you choose):
   â—‹ Beginner - "New to structured training"
   â—‹ Intermediate - "Train regularly, comfortable with intensity"
   â—‹ Advanced - "Years of training, competitive"
   â—‹ Elite - "High-level athlete, podium contender"
```

---

## SECTION 2: WHAT'S YOUR GOAL? (5 min)

### Primary Goal
```
4. What's your main goal?
   â—‹ Complete my first HYROX
   â—‹ Improve my HYROX time (PR)
   â—‹ Podium / Age Group Win
   â—‹ Train HYROX style (no specific race)
   â—‹ Multiple races this year (competitive season)
```

### Timeline & Race Details (if applicable)
```
5. When's your race? (if applicable)
   ðŸ“… [Date Picker]

6. Target time? (if racing)
   â—‹ Just finish strong
   â—‹ Sub 2:00 hours
   â—‹ Sub 1:30 hours
   â—‹ Sub 1:15 hours
   â—‹ Sub 1:00 hours
   â—‹ Podium (top 3)

7. Did you just finish a race?
   â—‹ Yes - within last 2 weeks (need recovery)
   â—‹ Yes - within last month (gentle restart)
   â—‹ No - ready to start fresh

   â†’ AI adjusts: Recent race = recovery phase first
```

### HYROX Competition Context
```
8. Do you have multiple races planned this year?
   â—‹ No - just one (or training for fitness)
   â—‹ Yes - 2-3 races (seasonal approach needed)
   â—‹ Yes - 4+ races (year-round competitor)

   If YES â†’ AI creates annual periodization
   - A-races (peak performance)
   - B-races (race hard but not peak)
   - C-races (training races)
```

---

## SECTION 3: CURRENT PERFORMANCE BENCHMARKS (5 min)

**Philosophy**: Numbers don't lie. If you run, you know your times. If you don't know, you're a beginner.

### Running PRs
```
9. What's your fresh 1km pace? (not compromised)
   â—‹ I don't know (â†’ AI assumes beginner)
   â—‹ [Enter pace: __:__ /km]

10. Best 5km time?
    â—‹ I don't know
    â—‹ [Enter time: __:__]

11. Comfortable Zone 2 pace (easy running)?
    â—‹ I don't know
    â—‹ [Enter pace: __:__ /km]

ðŸ’¡ Tip: If you track runs, you know these. If not, we'll find out together!
```

### Strength PRs (Optional but Helpful)
```
12. Do you know your 1RM or working weights?
    â—‹ Skip this - I don't track strength
    â—‹ Yes, I know my numbers

    If YES:
    - Back Squat 1RM or working 5-rep: ___ kg (optional)
    - Deadlift 1RM or working 5-rep: ___ kg (optional)

    â†’ Used to estimate sled push/pull weights
    â†’ If skipped, AI uses fitness level to estimate
```

### HYROX Station PRs (If Applicable)
```
13. Have you done HYROX stations? Let's get your benchmarks:

   SkiErg 1000m: â—‹ Never tried  â—‹ [__:__]
   Sled Push 50m: â—‹ Never tried  â—‹ [__sec] at [___kg]
   Sled Pull 50m: â—‹ Never tried  â—‹ [__sec] at [___kg]
   Rowing 1000m: â—‹ Never tried  â—‹ [__:__]
   Wall Balls (unbroken): â—‹ Never tried  â—‹ [__ reps]
   Burpee Broad Jumps (1min): â—‹ Never tried  â—‹ [__ reps]
   Farmers Carry: â—‹ Never tried  â—‹ [__m] at [__kg each]
   Sandbag Lunges: â—‹ Never tried  â—‹ Completed/Struggled

   ðŸ’¡ These help us prescribe exact weights and paces
   ðŸ’¡ If you don't know, we start conservative and learn
```

---

## SECTION 4: TRAINING PREFERENCES (5 min)

### Training Volume
```
14. How many days per week can you train consistently?
    â—‹ 3 days (minimum effective)
    â—‹ 4 days (standard)
    â—‹ 5 days (serious)
    â—‹ 6 days (competitive)
    â—‹ 7 days (elite - day 7 active recovery)

15. Sessions per day?
    â—‹ 1 session (most athletes)
    â—‹ 2 sessions (serious/competitive)
```

### Training Split Preference (if 2 sessions/day)
```
16. How do you prefer to split your training?

    â—‹ DEDICATED BLOCKS
      AM: Running only | PM: Strength/Stations only
      â†’ Best for: Running-focused, clear separation

    â—‹ HYBRID + RECOVERY
      AM: Hybrid (run + stations) | PM: Easy run or mobility
      â†’ Best for: HYROX-specific, time-efficient

    â—‹ HYROX FOCUS + RUNNING VOLUME
      AM: HYROX work (stations + compromised running) | PM: Pure running
      â†’ Best for: Equal focus, high volume

    â—‹ LET AI DECIDE DAILY
      AI optimizes split based on readiness and workout type
      â†’ Best for: Trust the process, adaptive
```

### Training Style Organization
```
17. What training style suits you best?

    â—‹ 5-6 DAYS MIXED
      Example: Mon/Wed/Fri HYROX-specific | Tue/Thu/Sat Pure runs
      â†’ Most common for intermediates

    â—‹ COMPROMISED RUNNING + DAILY GYM
      Every gym session includes running after stations
      â†’ HYROX race-specific

    â—‹ QUALITY OVER QUANTITY
      Fewer sessions, longer and more intense
      â†’ Best for limited time, high intensity tolerance

    â—‹ VARIETY & EXPLORATION
      Mix different session types, rotate exercises often
      â†’ Best for those who get bored easily
```

### Session Timing
```
18. When do you prefer to train?
    â—‹ Morning (5-8am)
    â—‹ Midday (11am-1pm)
    â—‹ Afternoon (3-5pm)
    â—‹ Evening (6-9pm)
    â—‹ Flexible - varies day to day

19. If 2 sessions/day, which split?
    â—‹ AM / PM (morning and evening)
    â—‹ AM / AM (both morning sessions)
    â—‹ PM / PM (both evening sessions)
```

### Special Training Considerations
```
20. Do you train at a track field?
    â—‹ No
    â—‹ Yes - 1x per week (AI includes track workouts)
    â—‹ Yes - 2x per week

21. What drives you most?
    â—‹ Competition - I want to beat others
    â—‹ Self-improvement - I compete with myself
    â—‹ Health & longevity - I want to feel great
    â—‹ The challenge - I like hard things

    â†’ AI adjusts tone and workout style
```

---

## SECTION 5: EQUIPMENT ACCESS (4 min)

**Smart Defaults: Check a category, get all items. Uncheck what you don't have.**

### Primary Training Location
```
22. Where do you train?

    â˜ HYROX-EQUIPPED GYM
      Auto-checks: SkiErg, Sled Push/Pull, Rower, Wall Ball,
                   Sandbag, Farmers Handles, Burpee area
      â†’ User can uncheck specific items

    â˜ CROSSFIT / FUNCTIONAL GYM
      Auto-checks: Barbell, Squat Rack, Pull-up Bar, Rower,
                   Kettlebells, Dumbbells, Plyo Box, Rings,
                   Assault Bike, Battle Ropes, Wall Ball
      â†’ User can uncheck specific items
      â†’ AI assumes sleds might not be available

    â˜ COMMERCIAL GYM
      Auto-checks: Barbell, Squat Rack, Bench, Dumbbells,
                   Rower (maybe), Treadmill, Cables
      â†’ Likely no HYROX-specific equipment
      â†’ AI creates substitutions

    â˜ HOME GYM
      Nothing auto-checked â†’ User selects what they have:

      Cardio:
      â˜ Concept2 Rower
      â˜ SkiErg
      â˜ Assault Bike
      â˜ Treadmill
      â˜ Just outdoor running

      Strength:
      â˜ Barbell + Rack
      â˜ Adjustable Dumbbells
      â˜ Kettlebells (which weights? ___)
      â˜ Pull-up Bar
      â˜ Resistance Bands

      HYROX Specific:
      â˜ Sled (push/pull)
      â˜ Wall Ball + Target
      â˜ Sandbag
      â˜ Farmers Carry Handles/Heavy DBs

      Other:
      â˜ Plyo Box
      â˜ Battle Ropes
      â˜ Suspension Trainer (TRX)
      â˜ Mobility tools (foam roller, bands)

    â˜ MINIMAL / OUTDOOR
      Auto-checks: Bodyweight, Outdoor running
      â†’ AI creates bodyweight + running focused plan

23. Multiple locations?
    â˜ Yes - I have gym + home setup
      â†’ AI optimizes: Gym days for HYROX stations, Home days for runs/strength
```

### Equipment Substitution Philosophy
```
24. If equipment isn't available, how should AI adapt?
    â—‹ Find close substitutes (battle ropes for SkiErg, heavy sled push alternatives)
    â—‹ Use what I have (don't worry about exact HYROX movements)
    â—‹ Tell me what to buy (I'm willing to invest in key equipment)
```

---

## SECTION 6: WEAKNESSES & FOCUS AREAS (3 min)

### Station Weaknesses (for HYROX athletes)
```
25. Which stations do you DREAD or struggle with most?
    (Select up to 3 - AI will prioritize these)

    â˜ SkiErg - "I gas out fast"
    â˜ Sled Push - "Legs die, can't maintain pace"
    â˜ Sled Pull - "Grip fails or technique poor"
    â˜ Burpee Broad Jumps - "Slow and exhausting"
    â˜ Rowing - "Can't hold target split"
    â˜ Farmers Carry - "Grip or core gives out"
    â˜ Sandbag Lunges - "Brutal on quads/balance"
    â˜ Wall Balls - "Shoulders or legs burn out"
    â˜ None - I'm balanced

    â†’ AI allocates +30% volume to weak stations
```

### Strength Hierarchy (Experimental - Let's Try It!)
```
26. Drag to order from STRONGEST â†’ WEAKEST:

    [Draggable list:]
    - Leg strength (squats, lunges)
    - Core stability (planks, anti-rotation)
    - Upper body push (push-ups, pressing)
    - Upper body pull (pull-ups, rows)
    - Posterior chain (deadlifts, hamstrings)
    - Grip endurance (carries, hangs)
    - Explosive power (jumps, sprints)

    â†’ AI starts strong areas higher, builds weak areas more
```

### Injuries & Limitations
```
27. Any current or past injuries we should know about?
    â˜ None - I'm healthy
    â˜ Lower back issues
    â˜ Knee pain (past or current)
    â˜ Shoulder mobility/pain
    â˜ Ankle problems
    â˜ Hip flexor tightness
    â˜ Other: _______________

    â†’ AI modifies movements, includes corrective exercises
```

### Mobility Assessment (Future: Visual Assets Needed)
```
28. FUTURE FEATURE (not now):
    - Video assessment for squat depth, overhead position, etc.
    - For now: AI assumes mobility work is needed for everyone
    - Includes 5-10min mobility blocks in warmups
```

---

## SECTION 7: OPTIONAL "GET TO KNOW YOU" (2 min)

**These help with marketing, community, and personalization - all optional!**

```
29. What will most likely derail your training? (optional)
    â˜ Work travel
    â˜ Family commitments
    â˜ Low motivation when tired
    â˜ Perfectionism (all-or-nothing)
    â˜ Injury concerns
    â˜ Nutrition/fueling issues

30. How did you hear about FLEXR? (optional - marketing)
    â—‹ HYROX community/friends
    â—‹ Social media
    â—‹ App Store search
    â—‹ Coach recommendation
    â—‹ Other: ___________
```

---

## PART 2: WHAT WE DON'T ASK (Smart Automation)

### âŒ Things We Track But Don't Ask:
- Sleep quality â†’ Track via Apple Watch, show in analytics, but DON'T use for plan generation
- Daily stress â†’ Out of our control, don't ask
- Detailed time blocks â†’ Too overwhelming, just ask AM/PM preference
- Nutrition habits â†’ Track in future feature, not onboarding
- Progression philosophy â†’ AI decides based on timeline and goals

### âœ… Things AI Handles Automatically:
- Progression rate â†’ Based on timeline to race + fitness level
- Deload weeks â†’ Calculated based on volume + intensity
- Taper strategy â†’ Automatic based on race date
- Exercise selection â†’ Based on equipment + weaknesses + fitness level
- Weight prescriptions â†’ Based on PRs OR estimated from fitness level

---

## PART 3: AI WEIGHT PRESCRIPTION LOGIC

### How AI Prescribes Weights (Your Expertise Codified)

**For Athletes With PRs:**
```python
# Example: Back Squat PR = 140kg
sled_push_weight = squat_pr * 0.6  # ~84kg (heavy)
sled_pull_weight = squat_pr * 0.4  # ~56kg (moderate)
goblet_squat_weight = squat_pr * 0.3  # ~42kg DB

# Example: Deadlift PR = 180kg
farmers_carry_weight_each = deadlift_pr * 0.25  # ~45kg each hand
sandbag_weight = deadlift_pr * 0.4  # ~72kg
```

**For Athletes Without PRs (Estimate from Fitness Level):**
```python
WEIGHT_ESTIMATES = {
    'beginner': {
        'sled_push': 40,  # kg
        'sled_pull': 25,
        'kettlebell': 12,
        'dumbbell': 10,
        'sandbag': 20,
        'farmers_carry_each': 16,
        'wall_ball': 6,
    },
    'intermediate': {
        'sled_push': 70,
        'sled_pull': 40,
        'kettlebell': 20,
        'dumbbell': 16,
        'sandbag': 30,
        'farmers_carry_each': 24,
        'wall_ball': 9,
    },
    'advanced': {
        'sled_push': 100,
        'sled_pull': 60,
        'kettlebell': 28,
        'dumbbell': 24,
        'sandbag': 40,
        'farmers_carry_each': 32,
        'wall_ball': 9,  # Men
    },
    'elite': {
        'sled_push': 140,
        'sled_pull': 85,
        'kettlebell': 32,
        'dumbbell': 32,
        'sandbag': 50,
        'farmers_carry_each': 40,
        'wall_ball': 9,
    }
}

# Gender adjustment
if gender == 'female':
    weights *= 0.65  # ~35% reduction across the board

# Conservative start (first week)
if week == 1:
    weights *= 0.8  # Start 20% lighter, learn from feedback
```

**AI Learns From Feedback:**
```
Week 1: Prescribes 70kg sled push
User completes: "Felt too easy (RPE 4/10)"
Week 2: Adjusts to 85kg (+21%)

Week 2: Prescribes 85kg sled push
User completes: "Perfect difficulty (RPE 7/10)"
Week 3: Maintains 85kg, maybe +5kg for progression
```

---

## PART 4: WORKOUT TRACKING & FEEDBACK

### Post-Workout Feedback System

**After Every Workout:**
```
1. Overall Difficulty (RPE):
   1  2  3  4  5  6  7  8  9  10
   â—‹  â—‹  â—‹  â—‹  â—‹  â—  â—‹  â—‹  â—‹  â—‹
   Easy    Moderate    Hard    Max

2. Could you have done more?
   â—‹ Yes - felt easy
   â—‹ Maybe - close to limit
   â—‹ No - that was my max today

3. Weights Used (track for next time):
   Sled Push: [___] kg (you used: 220kg last time)
   Farmers Carry: [___] kg each
   Kettlebell Swings: [___] kg
   Goblet Squats: [___] kg
   Wall Ball: [___] kg

4. Any issues? (optional)
   â˜ Felt too easy
   â˜ Felt too hard
   â˜ Pace targets were off
   â˜ Ran out of time
   â˜ Equipment issue
   â˜ Felt pain/discomfort â†’ [Where? ___]

5. Notes (optional):
   [Free text: "Felt great today, legs strong on sled"]
```

**What This Enables:**
- AI learns individual capacity
- Next workout shows: "Last time you used 220kg - try 225kg today?"
- Weight progression tracked automatically
- Pain/discomfort triggers AI modifications
- RPE calibrates future prescriptions

---

## PART 5: HOW AI GENERATES THE PLAN

### Phase 1: Analyze Complete Profile
```python
athlete = {
    # GOAL CONTEXT
    'primary_goal': 'PR my HYROX',
    'race_date': '2025-06-15',
    'weeks_to_race': 24,
    'target_time': '1:15:00',
    'just_finished_race': False,
    'multiple_races': True,  # Annual periodization needed

    # PERFORMANCE BASELINE
    'fitness_level': 'intermediate',
    'running_1km_pace': 4.2,  # min/km
    'running_5km_time': 22.5,  # minutes
    'running_z2_pace': 5.5,
    'squat_pr': 120,  # kg
    'deadlift_pr': 160,
    'station_prs': {
        'skierg_1000m': 240,  # seconds
        'sled_push_50m': (15, 80),  # (seconds, kg)
        'sled_pull_50m': (20, 60),
        'rowing_1000m': 210,
        'wall_balls_unbroken': 30,
        # ... etc
    },

    # TRAINING STRUCTURE
    'days_per_week': 5,
    'sessions_per_day': 1,
    'training_split': 'mixed_hyrox_running',
    'preferred_time': 'morning',
    'track_access': True,  # 1x/week

    # EQUIPMENT
    'equipment': {
        'location': 'crossfit_gym',
        'has_all_hyrox_stations': True,
        'has_barbell': True,
        'has_track': True,
    },

    # WEAKNESSES
    'weak_stations': ['sled_push', 'farmers_carry'],
    'strength_ranking': [
        'leg_strength',  # strongest
        'core',
        'upper_push',
        'posterior_chain',
        'upper_pull',
        'explosive_power',
        'grip',  # weakest
    ],
    'injuries': ['past_knee_pain'],

    # PREFERENCES
    'motivation': 'self_improvement',
    'training_style': 'hyrox_focus',
}
```

### Phase 2: Determine Plan Architecture
```python
# TIMELINE ANALYSIS
weeks_to_race = 24

if weeks_to_race >= 16:
    # LONG BUILD
    phase_1 = "Base Building" (6 weeks)
    phase_2 = "Strength Development" (6 weeks)
    phase_3 = "HYROX Specificity" (6 weeks)
    phase_4 = "Peak" (4 weeks)
    phase_5 = "Taper" (2 weeks)

elif weeks_to_race >= 12:
    # STANDARD BUILD
    phase_1 = "Foundation" (4 weeks)
    phase_2 = "Build" (4 weeks)
    phase_3 = "Peak" (3 weeks)
    phase_4 = "Taper" (1 week)

elif weeks_to_race >= 6:
    # COMPRESSED BUILD
    phase_1 = "Build" (3 weeks)
    phase_2 = "Peak" (2 weeks)
    phase_3 = "Taper" (1 week)

else:
    # MAINTENANCE + TAPER
    phase_1 = "Sharpen" (weeks - 1)
    phase_2 = "Taper" (1 week)

# WEEKLY STRUCTURE (5 days/week example)
week_template = {
    'monday': 'HYROX Hybrid (stations + 3-5km run)',
    'tuesday': 'Pure Running (intervals or tempo)',
    'wednesday': 'Strength Focus + Short Run',
    'thursday': 'Track Workout (1x/week)',
    'friday': 'HYROX Stations (compromised running focus)',
    'saturday': 'Long Run',
    'sunday': 'Rest',
}

# ADJUST FOR WEAKNESSES
# User is weak at: sled_push, farmers_carry, grip
additional_focus = {
    'monday': 'Extra sled push sets',
    'wednesday': 'Heavy farmers carries + grip work',
    'friday': 'Sled technique drills',
}
```

### Phase 3: Weight Prescription
```python
# User has PRs, use them
sled_push_week1 = athlete.squat_pr * 0.6 * 0.8  # 120kg * 0.6 * 0.8 = 57.6kg
# Start conservative (0.8 multiplier), progress based on feedback

farmers_carry_week1 = athlete.deadlift_pr * 0.25  # 160kg * 0.25 = 40kg each

# User struggles with grip (ranked last in strength)
# AI adds grip prehab + adjusts volume
grip_work = {
    'frequency': 3,  # 3x/week
    'exercises': ['dead_hangs', 'farmers_hold', 'thick_bar_work'],
    'progression': 'weekly +5sec or +2kg',
}
```

### Phase 4: Generate First Week
```
WEEK 1 - BASE BUILDING PHASE

MONDAY - HYROX Hybrid
Warmup (10min):
- 400m easy jog
- Dynamic stretching
- 2 rounds: 10 air squats, 10 push-ups, 10 good mornings

Main Work (45min):
Station Circuit (4 rounds):
1. SkiErg 250m (target: 1:00 pace â†’ 1:00 total)
2. Sled Push 50m (58kg - start conservative)
   ðŸ’¡ Last time you did 80kg. We're starting lighter to dial in technique.
3. Rowing 500m (target: 1:45 pace â†’ 3:30 total)
4. Wall Balls x20 (9kg)
5. 800m Run (target: 4:40-4:50 pace â†’ 3:44-3:52 total)
Rest 3min between rounds

Cooldown (5min):
- 400m easy jog
- Light stretching

AI Reasoning:
"Starting Week 1 conservative. Your sled push is a weakness, so we're at 58kg
(vs your PR of 80kg). Focus on technique this week. 4 rounds builds volume
without crushing you. 800m runs after stations teach compromised running."

---

TUESDAY - Running Intervals
Warmup (10min):
- 2km easy (5:30-5:45 pace â†’ target Z2)

Main (30min):
Intervals: 6 x 800m at 4:10-4:20 pace (faster than your 1km PR pace for short bursts)
Rest: 90sec jog recovery between

Cooldown (10min):
- 1.5km easy (6:00+ pace)

AI Reasoning:
"Building speed today. 800m intervals at 4:10-4:20 pace (faster than your 4:12
1km PR) will improve your ceiling. 90sec rest keeps intensity high."

---

... (etc for rest of week)
```

---

## PART 6: IMPLEMENTATION PRIORITIES

### Phase 1: Enhanced User Model (Week 1-2)
**Database Schema:**
```sql
-- Extend users table
ALTER TABLE users ADD COLUMN training_background VARCHAR;
ALTER TABLE users ADD COLUMN primary_goal VARCHAR;
ALTER TABLE users ADD COLUMN race_date DATE;
ALTER TABLE users ADD COLUMN target_time INTEGER; -- seconds
ALTER TABLE users ADD COLUMN weeks_to_race INTEGER;
ALTER TABLE users ADD COLUMN multiple_races BOOLEAN;
ALTER TABLE users ADD COLUMN just_finished_race BOOLEAN;
ALTER TABLE users ADD COLUMN days_per_week INTEGER;
ALTER TABLE users ADD COLUMN sessions_per_day INTEGER;
ALTER TABLE users ADD COLUMN training_split VARCHAR;
ALTER TABLE users ADD COLUMN preferred_time VARCHAR;
ALTER TABLE users ADD COLUMN session_timing VARCHAR;
ALTER TABLE users ADD COLUMN track_access BOOLEAN;
ALTER TABLE users ADD COLUMN motivation VARCHAR;

-- New table: user_performance_benchmarks
CREATE TABLE user_performance_benchmarks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),

    -- Running PRs
    running_1km_pace DECIMAL,
    running_5km_time DECIMAL,
    running_z2_pace DECIMAL,

    -- Strength PRs (optional)
    squat_pr DECIMAL,
    deadlift_pr DECIMAL,

    -- HYROX Station PRs
    skierg_1000m INTEGER,
    sled_push_time INTEGER,
    sled_push_weight DECIMAL,
    sled_pull_time INTEGER,
    sled_pull_weight DECIMAL,
    rowing_1000m INTEGER,
    wall_balls_unbroken INTEGER,
    burpee_broad_jumps_1min INTEGER,
    farmers_carry_distance DECIMAL,
    farmers_carry_weight DECIMAL,
    sandbag_lunges_status VARCHAR,

    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- New table: user_equipment_access
CREATE TABLE user_equipment_access (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    location_type VARCHAR, -- 'hyrox_gym', 'crossfit_gym', 'commercial_gym', 'home_gym', 'minimal'

    -- Equipment boolean flags
    has_skierg BOOLEAN DEFAULT false,
    has_sled BOOLEAN DEFAULT false,
    has_rower BOOLEAN DEFAULT false,
    has_wall_ball BOOLEAN DEFAULT false,
    has_sandbag BOOLEAN DEFAULT false,
    has_farmers_handles BOOLEAN DEFAULT false,
    has_barbell BOOLEAN DEFAULT false,
    has_squat_rack BOOLEAN DEFAULT false,
    has_pullup_bar BOOLEAN DEFAULT false,
    has_kettlebells BOOLEAN DEFAULT false,
    has_dumbbells BOOLEAN DEFAULT false,
    has_assault_bike BOOLEAN DEFAULT false,
    has_plyo_box BOOLEAN DEFAULT false,
    has_battle_ropes BOOLEAN DEFAULT false,
    has_mobility_tools BOOLEAN DEFAULT false,

    -- Multiple locations
    has_multiple_locations BOOLEAN DEFAULT false,
    secondary_location_type VARCHAR,

    substitution_preference VARCHAR, -- 'close_substitute', 'use_what_i_have', 'tell_me_to_buy'

    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- New table: user_weaknesses
CREATE TABLE user_weaknesses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),

    -- Station weaknesses (top 3)
    weak_station_1 VARCHAR,
    weak_station_2 VARCHAR,
    weak_station_3 VARCHAR,

    -- Strength hierarchy (ordered array)
    strength_ranking JSONB,

    -- Injuries/limitations
    injuries JSONB,

    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- New table: workout_feedback
CREATE TABLE workout_feedback (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    workout_id UUID REFERENCES workouts(id),
    user_id UUID REFERENCES users(id),

    -- Feedback
    rpe INTEGER, -- 1-10
    could_do_more VARCHAR, -- 'yes', 'maybe', 'no'

    -- Weights used (JSONB for flexibility)
    weights_used JSONB,
    -- Example: {"sled_push": 220, "farmers_carry": 40, "kettlebell": 24}

    -- Issues
    felt_too_easy BOOLEAN,
    felt_too_hard BOOLEAN,
    pace_off BOOLEAN,
    ran_out_of_time BOOLEAN,
    equipment_issue BOOLEAN,
    pain_discomfort BOOLEAN,
    pain_location VARCHAR,

    -- Notes
    notes TEXT,

    created_at TIMESTAMP DEFAULT NOW()
);
```

### Phase 2: Equipment Database Expansion (Week 2-3)
- Add 200+ exercises (barbell, dumbbell, bodyweight, cardio variations)
- Create substitution mapping
- Add weight prescription formulas

### Phase 3: New Onboarding Flow (Week 3-4)
- Build 7-section onboarding UI
- Smart defaults for equipment
- Drag-and-drop strength ranking
- Progressive disclosure (don't overwhelm)

### Phase 4: AI Plan Generator 2.0 (Week 4-6)
- Rewrite plan generation to use all new data
- Weight prescription logic
- Weakness-focused programming
- Multiple race periodization
- Post-race recovery detection

### Phase 5: Workout Feedback System (Week 6-7)
- Post-workout feedback UI
- Weight tracking per exercise
- AI learning from RPE + feedback
- Progressive overload automation

---

## PART 7: EXAMPLE AI PLAN GENERATION

**User Profile:**
```
Maria, 32F, CrossFit background, Intermediate level
Goal: First HYROX in 16 weeks, target sub-1:45
Just finished? No
Days/week: 5
Sessions/day: 1
Preferred time: Morning
Track access: No
Equipment: CrossFit gym (all equipment)

Benchmarks:
- 1km pace: 4:50/km
- 5km time: 26:30
- Z2 pace: 5:45/km
- Squat PR: 85kg
- Deadlift PR: 110kg
- HYROX: Never tried stations

Weaknesses: "I don't know, I've never done HYROX"
Strength ranking: Leg > Core > Upper Push > Posterior > Upper Pull > Power > Grip

Motivation: Self-improvement
```

**AI Generates:**

```
MARIA'S 16-WEEK HYROX PLAN

PHASE 1: FOUNDATION (Weeks 1-4)
Focus: Learn stations, build aerobic base, assess true weaknesses

Week 1 Structure:
- Mon: Station Introduction (light - learn technique)
- Tue: Easy Run 40min Z2
- Wed: Strength Maintenance (keep your CrossFit strength)
- Thu: Running Intervals (build speed)
- Fri: HYROX Circuit (stations + short run)
- Sat: Long Run 50min
- Sun: Rest

Weight Prescriptions (Week 1 - Conservative):
- Sled Push: 35kg (calculated from 85kg squat * 0.6 * 0.7 conservative start)
- Sled Pull: 25kg
- Farmers Carry: 18kg each (110kg DL * 0.25 * 0.65 female adjustment)
- Wall Ball: 6kg (standard women's)
- Kettlebell: 12kg

AI Reasoning:
"Maria, you're strong from CrossFit but new to HYROX. Week 1-4 we focus on
learning the 8 stations with light weights while building your aerobic engine.
Your 5km time (26:30) is decent but we need more Zone 2 base. We'll discover
your real weaknesses in Week 1 and adjust Week 2+ based on feedback.

Starting weights conservative - you'll likely crush these and we'll adjust up
quickly. Better to start light and build confidence than struggle Day 1."

---

EXAMPLE WORKOUT (Week 1, Monday):

HYROX STATION INTRODUCTION
Total: 55 minutes

Warmup (10min):
- 800m easy jog (5:45 pace)
- Mobility: Hip circles, leg swings, arm circles
- Activation: 2 rounds of 10 air squats + 10 push-ups

Main Work - Station Circuit (35min):
"Today is about LEARNING, not crushing. Focus on technique."

Round 1: Learn each station
1. SkiErg Tutorial (5min)
   - Technique: Arms â†’ Core â†’ Legs â†’ return
   - Try: 250m at comfortable pace
   - AI Demo Video: [Watch proper SkiErg form]

2. Sled Push Tutorial (5min)
   - Weight: 35kg (light to learn)
   - Distance: 50m
   - Focus: Low position, drive through legs
   - AI Demo Video: [Watch sled push technique]

3. Rowing Tutorial (5min)
   - Try: 500m at comfortable pace (aim for 2:15-2:20 split)
   - Technique: Legs â†’ Core â†’ Arms â†’ return

4. Wall Ball Tutorial (5min)
   - Weight: 6kg, Target: 9ft
   - Reps: 20
   - Focus: Full squat depth, hip drive

5. 800m Run (5min)
   - Pace: 5:00-5:10 (faster than Z2, teaching compromised pace)

Rest 3min, water break

Round 2: Same circuit, try to match Round 1 times
(Repeat all 5 stations)

Cooldown (10min):
- 1km easy jog
- Stretching focus: Quads, hip flexors, shoulders

Post-Workout:
"How did that feel? Rate difficulty 1-10 and tell me:
- Which station felt hardest?
- Did any weights feel too light/heavy?
- Any pain or discomfort?

This helps me adjust Week 2!"

---

Expected Feedback:
Maria completes and reports:
- RPE: 4/10 "Felt pretty easy!"
- Weights: "Sled push was too light, felt like warmup"
- Hardest: "SkiErg - grip and shoulders burned"

AI Adjusts Week 2:
- Sled push â†’ 50kg (+43%)
- Add extra SkiErg sessions (identified weakness)
- Farmers carry stays same (haven't tried yet)
- Add grip prehab 2x/week
```

---

**THIS is practical. THIS is implementable. THIS is world-class.**

*Document Version: 2.0 - Practical Edition*
*Created: December 2025*
*Status: Ready to Build*
